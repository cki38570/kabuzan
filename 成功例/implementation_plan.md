# 高度な株式チャート実装計画

## 目的
Lightweight Chartsを使用して、SMA、ボリンジャーバンド、パラボリックSAR、および「AI算出」トレンドラインを表示するインタラクティブな株式チャートStreamlitアプリを開発する。

## ユーザー・ルール準拠
-   **言語**: 日本語 (UIおよびドキュメント)
-   **モデル**: 利用可能なモデル機能を使用
-   **ドキュメント保存先**: `docs/advanced_stock_chart/`

## 変更案

### 1. プロジェクトセットアップ
-   **ファイル**: `requirements.txt`
    -   `streamlit`
    -   `yfinance`
    -   `pandas`
    -   `pandas_ta`
    -   `streamlit-lightweight-charts`
    -   `scipy` (ピーク検出用)

### 2. アプリケーションロジック (`app.py`)
-   **入力**: 銘柄コード用テキストボックス (例: "7203.T")
-   **データ**: `yfinance`を使用して日次データを取得
-   **指標 (Indicators)**:
    -   移動平均線 (SMA): 25日
    -   ボリンジャーバンド: 20日, 2σ
    -   パラボリックSAR: 加速係数0.02, 最大値0.2
-   **トレンドライン ("AI")**:
    -   `scipy.signal.argrelextrema` を使用して局所的な高値・安値を検出
    -   直近の重要なポイントを結ぶ支持線・抵抗線を計算して描画

### 3. チャート描画 (`streamlit-lightweight-charts`)
-   `renderLightweightCharts` の設定:
    -   ローソク足シリーズ (Candlestick series)
    -   ラインシリーズ (SMA, ボリンジャーバンド上限・下限)
    -   スキャッターシリーズ (パラボリックSAR)
    -   ラインシリーズ (トレンドライン)

## 検証計画
1.  **アプリ起動**: `streamlit run app.py`
2.  **入力テスト**: "7203.T" (トヨタ) や "9984.T" (ソフトバンク) を入力。
3.  **目視確認**:
    -   チャートのインタラクティブ性（ズーム/パン）を確認。
    -   オーバーレイ（SMA, BB）が価格アクションと一致しているか確認。
    -   パラボリックSARのドットがローソク足の上下に表示されるか確認。
    -   「トレンドライン」が描画され、高値・安値を結ぶ妥当な線に見えるか確認。

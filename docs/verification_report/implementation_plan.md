# アプリケーション機能検証計画 (kabuzan)

アップデートされたアプリケーションが設計通りに動作し、ユーザーに提供可能な品質であることを確認します。

## 検証項目

### 1. ユーザーインターフェース (UI) と新機能の統合
- **スクリーナー拡張**: 「日経225」「グロース」などのカテゴリが選択可能で、スキャンが正常に終了することを確認します。
- **AI分析タブ**: 
    - バックテスト結果（勝率、期待値）が表示されていること。
    - テクニカル強度スコア（メーター）が表示されていること。
- **ポジションサイズ計算機**: 「ポートフォリオ」タブ内で正しく計算が行われることを確認します。
- **モック警告**: Gemini APIが利用できない場合に、赤い警告メッセージが表示されることを確認します。

### 2. バックエンドロジックとパフォーマンス
- **並列処理の検証**: `scan_market` が `ThreadPoolExecutor` を使用して、同期処理よりも高速（または効率的）に動作することを確認します。
- **ターゲット価格の抑制**: 下落トレンドの銘柄を表示した際、エントリー推奨価格が「None」または非表示になっていることを確認します。
- **エラーハンドリング**: 無効な ticker や通信エラー時に適切にエラーメッセージが表示されることを確認します。

### 3. データ永続化とモバイル対応
- **ウォッチリストの永続化**: 銘柄追加後に `watchlist.json` が更新され、アプリ再起動後も保持されるか確認します。
- **PWA/モバイル設定**: HTMLソース内に `manifest.json` や `theme-color` 等のメタタグが正しく埋め込まれているか確認します。

## 検証方法

### 自動・半自動検証 (Browser Tool)
- `streamlit run app.py` を実行し、ブラウザツールを使用して以下の操作をシミュレートします。
    1. 銘柄検索（例: 7203 トヨタ）
    2. AI分析タブの表示確認
    3. スクリーナーの実行
    4. ポートフォリオへの追加

### 手動検証 (コードレビュー & ドライラン)
- ロジックの複雑な部分はコードのステップ実行やログ出力で確認します。
